fails:IO#external_encoding with 'r' mode when Encoding.default_internal is nil returns Encoding.default_external if the external encoding is not set
fails:IO#external_encoding with 'r' mode when Encoding.default_internal is nil returns Encoding.default_external when that encoding is changed after the instance is created
fails:IO#external_encoding with 'r' mode when Encoding.default_internal is nil returns the external encoding specified when the instance was created
fails:IO#external_encoding with 'r' mode when Encoding.default_external == Encoding.default_internal returns the external encoding specified when the instance was created
fails:IO#external_encoding with 'r' mode when Encoding.default_external != Encoding.default_internal returns the external encoding specified when the instance was created
fails:IO#external_encoding with 'rb' mode returns the external encoding specified by the mode argument
fails:IO#external_encoding with 'r+' mode when Encoding.default_internal is nil returns the external encoding specified when the instance was created
fails:IO#external_encoding with 'r+' mode when Encoding.default_external != Encoding.default_internal returns the external encoding specified when the instance was created
fails:IO#external_encoding with 'r+' mode when Encoding.default_external == Encoding.default_internal returns the external encoding specified when the instance was created
fails:IO#external_encoding with 'w' mode when Encoding.default_internal is nil returns the external encoding specified when the instance was created
fails:IO#external_encoding with 'w' mode when Encoding.default_external != Encoding.default_internal returns the external encoding specified when the instance was created
fails:IO#external_encoding with 'w' mode when Encoding.default_external == Encoding.default_internal returns the external encoding specified when the instance was created
fails:IO#external_encoding with 'wb' mode returns the external encoding specified by the mode argument
fails:IO#external_encoding with 'w+' mode when Encoding.default_internal is nil returns the external encoding specified when the instance was created
fails:IO#external_encoding with 'w+' mode when Encoding.default_external != Encoding.default_internal returns the external encoding specified when the instance was created
fails:IO#external_encoding with 'w+' mode when Encoding.default_external == Encoding.default_internal returns the external encoding specified when the instance was created
fails:IO#external_encoding with 'a' mode when Encoding.default_internal is nil returns the external encoding specified when the instance was created
fails:IO#external_encoding with 'a' mode when Encoding.default_external != Encoding.default_internal returns the external encoding specified when the instance was created
fails:IO#external_encoding with 'a' mode when Encoding.default_external == Encoding.default_internal returns the external encoding specified when the instance was created
fails:IO#external_encoding with 'a+' mode when Encoding.default_internal is nil returns the external encoding specified when the instance was created
fails:IO#external_encoding with 'a+' mode when Encoding.default_external != Encoding.default_internal returns the external encoding specified when the instance was created
fails:IO#external_encoding with 'a+' mode when Encoding.default_external == Encoding.default_internal returns the external encoding specified when the instance was created
